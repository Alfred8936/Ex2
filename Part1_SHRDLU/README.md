# SHRDLU 积木世界实验 - Part1

## 实验目的

本实验旨在展示和理解自然语言处理系统中**解析器设计**的重要性，特别是在经典的SHRDLU积木世界系统中。通过对比修改前后的两个UI界面，学生可以理解：

1. **模块化解析的局限性**：当对象解析器和命令解析器相互独立时的问题
2. **集成解析的优势**：整合多个解析器协同工作的重要性
3. **自然语言理解的挑战**：如何正确识别和理解完整的用户意图

## 问题说明

### 修改前的问题

#### UI界面1 - 对象解析器
- **问题现象**：显示 "Parser failed to identify objects."
- **问题原因**：该解析器只专注于识别命令中的对象（颜色、形状），完全忽略动作词
- **设计缺陷**：即使成功识别了对象，但由于缺少动作信息，系统无法执行任何操作，因此报错

#### UI界面2 - 命令解析器  
- **问题现象**：显示 "I don't understand that command."
- **问题原因**：该解析器只专注于识别动作词（拿起、移动、放下），完全忽略对象信息
- **设计缺陷**：即使成功识别了动作，但由于缺少对象信息，系统不知道要操作哪个积木，因此报错

### 核心问题

两个解析器各自为政，**没有协同工作机制**：
- UI1有对象但无动作 → 不知道要做什么
- UI2有动作但无对象 → 不知道对谁做

这是一个典型的**系统集成问题**，展示了模块化设计中缺乏整合的后果。

## 解决方案

### 修复后的改进

创建了一个**完整的解析器**（UI界面3），它：

1. **同时解析对象和动作**：整合了两个独立解析器的功能
2. **验证完整性**：确保命令同时包含动作和对象信息
3. **提供清晰反馈**：准确告诉用户缺少哪部分信息
4. **成功执行命令**：只有在完整解析后才执行操作

### 代码修改要点

```javascript
// 修改前 - UI1：只看对象
parseObjectsOnly(command) {
    // 只解析颜色和形状
    // 忽略动作 → 总是失败
}

// 修改前 - UI2：只看动作  
parseCommandOnly(command) {
    // 只解析动作词
    // 忽略对象 → 总是失败
}

// 修改后 - 完整解析
parseComplete(command) {
    // 1. 解析颜色
    // 2. 解析形状
    // 3. 解析动作
    // 4. 验证：必须有动作 + (颜色或形状)
    // 5. 成功则执行
}
```

## 如何使用

### 1. 打开应用

在浏览器中打开 `index.html` 文件。

### 2. 尝试三个UI界面

#### 测试UI1（对象解析器）
- 点击"UI界面1"按钮
- 输入命令：`拿起红色的方块`
- 观察结果：显示"Parser failed to identify objects."
- **原因**：虽然识别了"红色"和"方块"，但忽略了"拿起"动作

#### 测试UI2（命令解析器）  
- 点击"UI界面2"按钮
- 输入命令：`拿起红色的方块`
- 观察结果：显示"I don't understand that command."
- **原因**：虽然识别了"拿起"动作，但忽略了"红色方块"对象

#### 测试修复后的UI
- 点击"修复后的UI"按钮
- 输入命令：`拿起红色的方块`
- 观察结果：成功解析并执行！
- **原因**：同时识别了动作和对象，完整理解了用户意图

### 3. 示例命令

- `拿起红色的方块` - 抓取红色立方体
- `移动蓝色的球` - 移动蓝色球体
- `放下绿色的立方体` - 放下手中的积木
- `拿起黄色的金字塔` - 抓取黄色金字塔

## 实验收获

通过本实验，学生应该理解：

1. **系统集成的重要性**：独立的模块必须有效协作
2. **完整性验证**：NLP系统需要验证所有必要信息都已解析
3. **用户体验**：清晰的错误信息帮助用户理解问题
4. **设计思维**：好的系统设计考虑整体而非局部

## 技术实现

### 文件结构
```
Part1_SHRDLU/
├── index.html      # 主页面
├── style.css       # 样式文件
├── blocks.js       # 积木世界渲染和交互
├── parser.js       # 三种解析器实现
├── app.js          # 应用主逻辑
└── README.md       # 本说明文件
```

### 技术栈
- 纯 HTML/CSS/JavaScript
- Canvas API 用于图形渲染
- 无需服务器，可直接在浏览器中运行

## 扩展思考

1. **如何处理歧义**？如果有多个红色方块怎么办？
2. **如何支持更复杂的命令**？例如"把红色方块放到蓝色球上面"
3. **如何添加上下文理解**？例如"再移动一次"需要记住上一个命令
4. **如何处理语法变化**？不同的表达方式应该得到相同的理解

## 总结

这个实验直观地展示了：
- ❌ **分离的解析器** → 系统无法工作
- ✅ **集成的解析器** → 系统正确理解用户意图

这是自然语言处理和人工智能系统设计中的一个基本原则：**整体大于部分之和**。单独的组件可能都很完美，但如果不能有效协作，系统就无法发挥作用。

---

**作者注**：SHRDLU是由Terry Winograd于1968-1970年开发的经典自然语言理解系统，本实验简化了原系统以突出解析器集成的核心概念。
